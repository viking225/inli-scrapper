volumes:
  db-data:
    
services:
  scrapper-api:
    image: scrapper/inli
    build: .
    restart: always
    container_name: scrapper-api
    environment:
      - PORT=9005
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      - INLI_URL=${INLI_URL}
    volumes:
      - db-data:/opt/app/.output/
    healthcheck:
      test: curl --fail -s http://localhost:$$PORT/health | grep -Eo '\"status\":\"ok\"' || exit 1
      start_period: 60s
      interval: 300s
      timeout: 10s
      retries: 3
